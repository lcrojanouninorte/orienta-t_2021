<div class="row">
    <div class="card-col col-sm-12 col-md-4">
        <nb-card accent="info" class="row-card" size="large">
            <div class="icon-container">
                <nb-icon class="icon status-danger" icon="cube-outline"></nb-icon>
            </div>
            <div class="details">
                <div class="title h5">{{countObj(roles['General'])}}</div>
                <div class="status paragraph-2">General/Estudiante</div>
            </div>
            <nb-actions *ngIf="_accessChecker.isGranted('Register Admin', 'all') | async" class="actions" size="small">
                <nb-action (click)="openUserDialog()" nbTooltip="Añadir Usuario" nbTooltipStatus="primary" icon="plus-outline"></nb-action>
            </nb-actions>
        </nb-card>
    </div>
    <div class="card-col col-sm-12 col-md-4">
        <nb-card accent="info" class="row-card">
            <div class="icon-container">
                <nb-icon class="icon status-info" icon="smiling-face-outline"></nb-icon>
            </div>
            <div class="details">
                <div class="title h5">{{countObj(roles['Staff'])}}</div>
                <div class="status paragraph-2">Staff </div>
            </div>
            <nb-actions *ngIf="_accessChecker.isGranted('Register Staff', 'all') | async" class="actions" size="small">
                <nb-action (click)="openUserDialog()" nbTooltip="Añadir Usuario" nbTooltipStatus="primary" icon="plus-outline"></nb-action>
            </nb-actions>
        </nb-card>
    </div>
    <div class="card-col col-sm-12 col-md-4">
        <nb-card accent="info" class="row-card">
            <div class="icon-container">
                <nb-icon class="icon status-danger" icon="cube-outline"></nb-icon>
            </div>
            <div class="details">
                <div class="title h5">{{countObj(roles['Admin'])}}</div>
                <div class="status paragraph-2">Admins</div>
            </div>
            <nb-actions *ngIf="_accessChecker.isGranted('Register Admin', 'all') | async" class="actions" size="small">
                <nb-action (click)="openUserDialog()" nbTooltip="Añadir Usuario" nbTooltipStatus="primary" icon="plus-outline"></nb-action>
            </nb-actions>
        </nb-card>
    </div>


</div>

<div class="card-row row">
    <div class="card-col col-sm-12 col-md-4 infinite-cards">
        <nb-card accent="info" size="medium">
            <nb-card-header>General/Estudiante</nb-card-header>
            <nb-list nbInfiniteList [threshold]="500" (bottomThreshold)="loadGeneral()">
                <nb-list-item matRipple class="contact" *ngFor="let user of  users['General'] ; index as i ; trackBy: trackByMethod ">
                    <nb-user [picture]="user?.profile?.avatar" [name]="user?.email" [title]="user?.general?.first_name" size="medium"></nb-user>
                    <div *ngIf="_accessChecker.isGranted('Register Admin', 'all') | async" class="icon-container  d-flex justify-content-end align-items-stretch flex-fill">
                        <a size="small" ghost nbButton [routerLink]="[user.id]">
                            <nb-icon status="info" class="icon" icon="edit" pack="eva"></nb-icon>
                        </a>
                        <a size="small" ghost nbButton (click)="deleteUser(user)">
                            <nb-icon status="basic" class="icon" icon="trash" pack="eva"></nb-icon>
                        </a>
                    </div>
                </nb-list-item>
                <nb-list-item *ngFor="let _ of placeholders['General']">
                    -
                </nb-list-item>
            </nb-list>

        </nb-card>
    </div>

    <div class="card-col col-sm-12 col-md-4">
        <nb-card accent="info" size="medium">
            <nb-card-header>Staff</nb-card-header>
            <nb-list nbInfiniteList [threshold]="500" (bottomThreshold)="loadStaff()">
                <nb-list-item matRipple class="contact" *ngFor="let user of users['Staff']  ; index as i ; trackBy: trackByMethod">
                    <nb-user [picture]="user?.profile?.avatar" [name]="user?.email" [title]="user?.general?.first_name" size="medium"></nb-user>
                    <div *ngIf="_accessChecker.isGranted('Register Staff', 'all') | async" class="icon-container  d-flex justify-content-end align-items-stretch flex-fill">
                        <a size="small" ghost nbButton [routerLink]="[user.id]">
                            <nb-icon status="info" class="icon" icon="edit" pack="eva"></nb-icon>
                        </a>
                        <a size="small" ghost nbButton (click)="deleteUser(user)">
                            <nb-icon status="basic" class="icon" icon="trash" pack="eva"></nb-icon>
                        </a>
                    </div>
                </nb-list-item>
                <nb-list-item *ngFor="let _ of placeholders['Staff']">
                    -
                </nb-list-item>
            </nb-list>
        </nb-card>
    </div>
    <div class="card-col col-sm-12 col-md-4">
        <nb-card accent="info" size="medium">
            <nb-card-header>Administradores</nb-card-header>
            <nb-list nbInfiniteList [threshold]="500" (bottomThreshold)="loadAdmin()">
                <nb-list-item matRipple class="contact" *ngFor="let user of users['Admin']   ; index as i ; trackBy: trackByMethod">
                    <nb-user [picture]="user?.profile?.avatar" [name]="user?.email" [title]="user?.general?.first_name" size="medium"></nb-user>
                    <div *ngIf="_accessChecker.isGranted('Register Admin', 'all') | async" class="icon-container  d-flex justify-content-end align-items-stretch flex-fill">
                        <a size="small" ghost nbButton [routerLink]="[user.id]">
                            <nb-icon status="info" class="icon" icon="edit" pack="eva"></nb-icon>
                        </a>
                        <a size="small" ghost nbButton (click)="deleteUser(user)">
                            <nb-icon status="basic" class="icon" icon="trash" pack="eva"></nb-icon>
                        </a>
                    </div>
                </nb-list-item>
                <nb-list-item *ngFor="let _ of placeholders['Admin']">
                    -
                </nb-list-item>
            </nb-list>

        </nb-card>
    </div>

</div>
